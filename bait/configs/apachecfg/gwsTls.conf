<VirtualHost *:80>
    ServerName catchall
    <Location />
        Order allow,deny
        Deny from all
    </Location>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName {domain}
    ServerAlias www.{domain}
    DocumentRoot /var/www/html
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
RewriteEngine on
RewriteCond %{SERVER_NAME} =www.{domain} [OR]
RewriteCond %{SERVER_NAME} ={domain}
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

<VirtualHost *:443>
    ServerName catchall
        SSLEngine on
        SSLCertificateFile {TlsCrtPath}
        SSLCertificateKeyFile {TlsKeyPath} 
        SSLCertificateChainFile {TlsIntermediatePath}
        ## Uncomment if/when you want to use redirector and comment paths above.
        #SSLCertificateFile /opt/gwsProject/redirector-tls/pub.pem
        #SSLCertificateKeyFile /opt/gwsProject/redirector-tls/priv.pem
        #SSLCertificateChainFile /opt/gwsProject/redirector-tls/int.pem
    <Location />
        Order allow,deny
        Deny from all
    </Location>
</VirtualHost>

# <VirtualHost *:443>
#     ServerAdmin webmaster@localhost
#     ServerName gws-redirector.sub.tld
#         SSLEngine on
#         SSLCertificateFile /opt/gwsProject/redirector-tls/pub.pem
#         SSLCertificateKeyFile /opt/gwsProject/redirector-tls/priv.pem
#         SSLCertificateChainFile /opt/gwsProject/redirector-tls/int.pem
#     ServerAlias www.gws-redirector.sub.tld
#     DocumentRoot /var/www/redirector
#     ErrorLog ${APACHE_LOG_DIR}/error.log
#     CustomLog ${APACHE_LOG_DIR}/access.log combined
# </VirtualHost>

<VirtualHost *:443>
    ServerAdmin webmaster@localhost
    ServerName {domain}
	    SSLEngine on
        SSLCertificateFile {TlsCrtPath}
        SSLCertificateKeyFile {TlsKeyPath} 
        SSLCertificateChainFile {TlsIntermediatePath}
    ServerAlias www.{domain}
    DocumentRoot /var/www/html
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
